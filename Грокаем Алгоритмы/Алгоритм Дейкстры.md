Алгоритм Дейкстры позволяет определить кратчайший путь к X для взвешенных графов.

Взвешенные графы - это графы, ребра которых имеют вес. Например, от узла Москва до узла Санкт-Петербург ребро (расстояние между городами) будет иметь вес 800 км.

Разница алгоритма Дейкстры с алгоритмом поиска в ширину - это то, что поиск в ширину найдет кратчайший путь по количеству ребер между узлами, тогда как алгоритм Дейкстры найдет самый дешевый путь, ориентируясь на веса ребер.

Алгоритм Дейкстры состоит из 4-х шагов:
1. Находясь в текущем узле: найти узел, переход к которому занимает наименьшую стоимость.
2. Проверить, существует ли более дешевый путь к соседям найденного узла и если да, обновить их стоимости.
3. Повторять, пока это не будет сделано для всех узлов графа.
4. Вычислить итоговый путь (ниже подробнее).

## Особенности алгоритма

Алгоритм Дейкстры работает только с направленными ациклическими графами или DAG (Directed Acyclic Graph).

Алгоритм держится на одной важной идеи: *в графе ищется путь с наименьшей стоимостью. Пути к этому узлу с меньшими затратами не существует!* Например, есть граф:
![[Pasted image 20250406134041.png]]

Возможно ли добраться из дома до школы быстрее, чем за 2 минуты? Нет. Это не возможно, так как только путь в парк уже занимает 6 минут. А вот можно ли добраться из дома до парка быстрее чем за 6 минут? Да. Через школу 2 мин + 1 мин  = 3 мин.

Алгоритм Дейкстры не может работать с графом, содержащим ребра с отрицательным весом. Результат работы будет неверным. Существует другой [Алгоритм Беллмана — Форда](https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC_%D0%91%D0%B5%D0%BB%D0%BB%D0%BC%D0%B0%D0%BD%D0%B0_%E2%80%94_%D0%A4%D0%BE%D1%80%D0%B4%D0%B0), который позволят делать поиск во взвешенных графах с отрицательными ребрами (и циклами?). 


## Пример

Есть граф:

![[Pasted image 20250406133106.png]]

Нам необходимо обменять кинину на пианино и сделать это с минимальными затратами.

Для работы алгоритма необходимо создать таблицу со стоимостью всех узлов и столбцом родитель:

| Родитель | Узел      | Стоимость |
| -------- | --------- | --------- |
| Книга    | Пластинка | 5         |
| Книга    | Постер    | 0         |
| -        | Гитара    | inf       |
| -        | Барабан   | inf       |
| -        | Пианино   | inf       |

Теперь, идем по алгоритму. Самый дешевый переход к постеру - шагнули на него. Далее, обновляем стоимости к соседям постера и их родителей ЕСЛИ это дешевле, чем было.

| Родитель | Узел      | Стоимость |
| -------- | --------- | --------- |
| Книга    | Пластинка | 5         |
| Книга    | Постер    | 0         |
| Постер   | Гитара    | 30        |
| Постер   | Барабан   | 35        |
| -        | Пианино   | inf       |

Проводим следующую итерацию от *Книги*, так как у нас там остались не просмотренные узлы. Следующий дешевый переход - это к пластинке. Шагаем туда и обновляем стоимость соседей и родителей ЕСЛИ это дешевле, чем было.

| Родитель  | Узел      | Стоимость |
| --------- | --------- | --------- |
| Книга     | Пластинка | 5         |
| Книга     | Постер    | 0         |
| Пластинка | Гитара    | 20        |
| Пластинка | Барабан   | 25        |
| -         | Пианино   | inf       |

Проводим следующую итерацию от *Гитары*, так как у нее следующий дешевый маршрут. Шагаем к ней и меняем стоимость соседей и родителей ЕСЛИ это дешевле, чем было.

| Родитель  | Узел      | Стоимость |
| --------- | --------- | --------- |
| Книга     | Пластинка | 5         |
| Книга     | Постер    | 0         |
| Пластинка | Гитара    | 20        |
| Пластинка | Барабан   | 25        |
| Гитара    | Пианино   | 40        |

Проводим следующую итерацию от *Барабанов*. Шагаем к ним и меняем стоимость соседей и родителей ЕСЛИ это дешевле, чем было.

| Родитель  | Узел      | Стоимость |
| --------- | --------- | --------- |
| Книга     | Пластинка | 5         |
| Книга     | Постер    | 0         |
| Пластинка | Гитара    | 20        |
| Пластинка | Барабан   | 25        |
| Барабан   | Пианино   | 35        |

Мы прошлись по всем узлам и заполнили таблицу окончательными данными. Теперь необходимо построить маршрут. Нужно идти по нашей таблице, строя маршрут в обратном направлении начиная с целевого узла.

Родитель "Пианино" - это "Барабан", родитель "Барабана" - это "Пластинка", родитель "Пластинки" - это "Книга". Получается маршрут: Кинга -> Пластинка -> Барабан -> Пианино.