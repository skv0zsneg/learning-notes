Нужно хорошо подумать что лучше всего подойдет для программной системы: объекты — легко добавить новый тип, тяжело добавить новое поведение; структуры — легко добавить новое поведение без изменения структур, тяжело добавить новые структуры в существующие функции.
## Абстракция данных

Если необходимо ограниченно предоставить доступ к строению данных полезно прибегать к сокрытию реализации объекта/структуры с этими данными путем использования абстрактных интерфейсов.

Это необходимо, т.к. в случае изменения объекта/структуры, который хранит данные интерфейс использования этих данных никак не изменится, что очень хорошо.

## Антисимметрия структур/объектов

Объекты — скрывают свои данные за абстракциями и предоставляют функции для работы с такими данными.

Структуры данных — раскрывают свои данные и не имеют осмысленных функций.

У структур и объектов есть свои плюсы и минусы, которые при этом противоположны друг другу:

**Плюсы**

- Процедурный код (код, использующий структуры данных) позволяет легко добавлять новые функции без изменения существующих структур данных.
- ОО код упрощает добавление новых классов без изменения существующих функций.

**Минусы**

- Процедурный код усложняет добавление новых структур данных, потому что оно требует изменений во всех функциях.
- ОО код усложняет добавление новых функций, потому что для этого должны будут изменится все классы.

Когда в программной системе встает вопрос о добавление нового типа — лучше всего для этого подойдет ОО. Когда необходимо добавить новую функцию, а не тип — удобнее всего воспользоваться структурами и процедурным кодом. Все сложно, нужно смотреть на контекст.

> Представление о том, что все данные должны представляться в виде объектов — **миф**! Иногда предпочтительнее использовать простые структуры данных и процедуры, работающие с ними.

## Закон Деметры (_Law of Demeter_, LoD)

Правило основывается на _**принципе наименьшего знания**_. Основной идеей является то, что объект должен иметь как можно меньше представления о структуре и свойствах чего угодно (включая собственные подкомпоненты).

> Модуль не должен знать внутренне устройство тех объектов, с которыми он работает.

Более точно описание закона: метод foo класса C ограничивается вызовом только следующих объектов:

- C
- Объектов, созданных foo
- Объекты из аргументов foo
- Объекты, хранящиеся в переменной-экземпляра C

**Преимущества**

Преимуществами закона Деметры является то, что код, разработанный с соблюдением данного закона, делает написание тестов более простым, а разработанное программное обеспечение имеет большие возможности повторного использования кода, из-за чего его легче поддерживать. Так как объекты являются менее зависимыми от внутренней структуры других объектов, контейнеры объектов могут быть изменены без модификации вызывающих объектов (клиентов).

Пример нарушения правила: `final String outputDir = ctxt.getOptions().getScratchDir().getAbsoluteDir()`

Идет работа с объектами, называемыми «крушение поезда» (такая цепочка вызовов похожа на поезд).

Закон Деметры не нарушался бы, если бы использовалась цепочка вызовов структур т.к. у структуры данных, DTO, внутренние объекты не скрыты.

## Гибриды

Иногда, чтобы воспользоваться обеими преимуществами структур и объектов создают гибриды мешая туда особенности объектов и структур. Это ничего не улучшает, а только ухудшает.

Не надо так.

## Скрытие структуры

Если встречаются такие паровозики из вызовов объектов нужно внимательно посмотреть код, возможно то что тут пытаются сделать можно скрыть внутри объекта который вызывает за собой ряд других.

## Объекты передачи данных

Квинтэссенцией структуры данная является класс с открытыми атрибутами и без методов. Такие структуры иногда называют DTO — объектами передачи данных (data transfer object).

DTO очень полезны при работе с БД/сообщениями из сокетов.

Также, существует форма bean-компонентов. Их прикол в приватных переменных и публичных методах доступа и изменения этих приватных переменных.

> Подобная форма псвевдоинкапсуляции поднимает настроение некоторым блюстителям чистоты ОО, но обычно не имеет других преимуществ ©️

## Активные записи (Active records)

Active Records — это разновидность DTO, которая содержит навигационные методы e.g. save или find. Такие структуры чаще всего являются прямым преобразованием таблиц БД или другого источника данных.

В такие данные не нужно зашивать бизнес логику, а то будет получаться объект + структура = гибрид. К active récords нужно относится как к структурам и реализовывать отдельные объекты (со скрытой реализацией) по работе с этими структурами.