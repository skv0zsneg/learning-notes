Может ли набор простых правил заменить практический опыт? Нет, конечно . С другой стороны, правила, описанные в этой главе и в книге, представляют собой кристаллизованную форму многих десятилетий практического опыта ав- торов. Принципы простой архитектуры помогают разработчикам следовать по тому пути, который им пришлось бы самостоятельно прокладывать в течение многих лет.

Существуют 4 правила простой архитектуры по Кенту Беку. Правило говорит, что архитектура может считаться «простой», если она:

- Обеспечивает прохождение все тестов
- Не содержит дублирующегося кода
- Выражает намерения программиста
- Использует минимальное количество классов и методов.

## Правило №1: выполнение всех тестов

Система, тщательно протестированная и прошедшая все тесты — контролируема. Стремление к контролируемости системы ведёт к архитектуре с компактными узкоспециализированными классами. Имеется ввиду то, что классы соответствующие SRP проще тестировать. Чем больше тестов пишется тем интенсивнее используются различные принципы E.g. DIP и такие инструменты как внедрение зависимостей, интерфейсы и абстракции для минимизации привязок.

## Правила №2-4: переработка кода

После получения полного набора тестов можно начать чистку кода и классов. Для этого проводится рефакторинг: изменение → анализ изменений → запуск тестов → повтор при необходимости. В процесс рефакторинг идут любые приемы: повышение связанности, устранение жестких привязок, разделение ответсвенности, изоляция системных областей ответственности, сокращение объема функций и классов, выбор более содержательных имён, устранение дубликатов, обеспечение выразительности и минимизации количества классов и методов.

## Отсутствие дублирования

Главный минус дублирования - лишняя работа, лишний риск и избыточная сложность. Дублирование может быть как очевидным — одинаковый код, так и не очевидным. E.g. методы класса `size` и `is_empty` могут быть реализованные по разному внутри, однако вполне достаточно внутри `is_empty` использовать метод `size` для устранения дополнительного взаимодействия со структурой данных — `self.size() == 0` Ответственность за получения размера только одна — у `size`

Для создания чистой системы нужно избавляться от дублирования даже в паре строк кода.

## Выразительность

Писать выразительный код важно, так как в процессе выполнения задачи код очевиден, так как мы погружены в проблему. Спустя какое-то время к коду придётся вернуться либо нам, либо другим разработчикам. И тогда контекст уже будет улавливаться с трудом.

Чтобы повысить выразительность кода, необходимо придерживаться следующего:

- Хороший выбор имён переменных, методов, классов.
- Небольшие размеры классов и функций.
- Хорошо написанные модульные тесты.

Перед отправкой кода на ревью необходимо еще раз просмотреть написанный код и добавить ему выразительности.

## Минимум классов и методов

Стремясь уменьшить объём классов и функций можно наплодить много мелких классов и функций. Нужно этого избегать, но не жертвуя тестами, выразительностью и другими правилами простой архитектуры.